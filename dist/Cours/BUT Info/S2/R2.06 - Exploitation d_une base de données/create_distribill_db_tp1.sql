drop schema if exists tp1 cascade;
create schema tp1;

set schema 'tp1';

create table dept(
  nodept    integer primary key,
  nomdept   varchar(15) not null,
  lieu      varchar(20) not null
);

create table emp(
  matr    integer       primary key,
  nome    varchar(30)   not null,
  sal     numeric(10,2) not null,
  poste   varchar(15)   not null,
  dateemb date          not null,
  comm    numeric(10,2) not null,
  mondept integer       not null references dept
);

create table dirige(
  sup   integer not null references emp,
  sub   integer primary key references emp
);

INSERT INTO tp1.dept(nodept,nomdept,lieu)
VALUES (10,'FINANCES','PARIS'),
       (20,'RECHERCHES','GRENOBLE'),
       (30,'VENTES','LYON'),
       (40,'FABRICATION','ROUEN');


WbImport -file=./employe.csv
         -table=emp
         -delimiter='\t'
         -header=false
         -filecolumns=matr,nome,sal,poste,dateemb,comm,mondept
         -dateformat="yyyy-MM-dd";
         
insert into dirige(sub,sup)
values (7566,7839),
       (7698,7839),
       (7782,7839),
       (7788,7566),
       (7902,7566),
       (7876,7788),
       (7369,7902),
       (7499,7698),
       (7521,7698),
       (7844,7698),
       (7654,7698),
       (7900,7698),
       (7934,7782);

